{"ast":null,"code":"import _objectSpread from\"C:/Final year project - Copy - Copy/Final year/charity/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect}from'react';import{useNavigate}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{ORDER_CREATE_RESET}from'../constants/paymentConstant';import{Row,Col,ListGroup,ListGroupItem,Card,Button,Image}from'react-bootstrap';import CheckoutSteps from'../components/paymentStep';import ErrorMessageBox from'../components/ErrorMessagebox';import{createDonation}from'../actions/paymentAction';import Loading from'../components/Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function PaymentScreen(){var dispatch=useDispatch();var donationCreate=useSelector(function(state){return state.donationCreate;});var success=donationCreate.success,error=donationCreate.error,loading=donationCreate.loading,donations=donationCreate.donations;var navigate=useNavigate();useEffect(function(){if(success){navigate(\"/\");dispatch({type:ORDER_CREATE_RESET});}},[success,navigate,dispatch,donations]);var payment=useSelector(function(state){return state.payment;});payment.taxPrice=Number((0.11*payment.savePayment.donation).toFixed(2));payment.totalPrice=Number(payment.taxPrice)+Number(payment.savePayment.donation);var placeOrderHandler=function placeOrderHandler(){dispatch(createDonation(_objectSpread(_objectSpread({},payment),{},{DonateItems:payment.Items,savePayment:payment.savePayment,taxPrice:payment.taxPrice,totalPrice:payment.totalPrice})));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroupItem,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Donation Project detail\"}),/*#__PURE__*/_jsx(Col,{md:3,className:\"mt-3\",children:/*#__PURE__*/_jsx(Image,{src:payment.Items.image,rounded:true,fluid:true,alt:payment.Items.name})},payment.Items.project),/*#__PURE__*/_jsxs(Col,{className:\"mt-2\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Name:\",payment.Items.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",payment.Items.category]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",payment.Items.description]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Solution: \",payment.Items.Solution]})]})]}),/*#__PURE__*/_jsxs(ListGroupItem,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Donor Detail\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Name: \",payment.savePayment.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",payment.savePayment.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",payment.savePayment.description]})]})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Donation Summary\"})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Donation amount\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",payment.savePayment.donation]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Tax\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",payment.taxPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",payment.totalPrice]})]})}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",amount:payment.totalPrice,onClick:placeOrderHandler,children:\"Pay now\"}),loading&&/*#__PURE__*/_jsx(Loading,{}),error&&/*#__PURE__*/_jsx(ErrorMessageBox,{variant:\"danger\",children:error})]})]})})})]})]});}","map":{"version":3,"names":["React","useEffect","useNavigate","useSelector","useDispatch","ORDER_CREATE_RESET","Row","Col","ListGroup","ListGroupItem","Card","Button","Image","CheckoutSteps","ErrorMessageBox","createDonation","Loading","PaymentScreen","dispatch","donationCreate","state","success","error","loading","donations","navigate","type","payment","taxPrice","Number","savePayment","donation","toFixed","totalPrice","placeOrderHandler","DonateItems","Items","image","name","project","category","description","Solution","email"],"sources":["C:/Final year project - Copy - Copy/Final year/charity/frontend/src/screens/paymentScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { ORDER_CREATE_RESET } from '../constants/paymentConstant'\r\nimport {\r\n  Row,\r\n  Col,\r\n  ListGroup,\r\n  ListGroupItem,\r\n  Card,\r\n  Button,\r\n  Image,\r\n} from 'react-bootstrap'\r\nimport CheckoutSteps from '../components/paymentStep'\r\nimport ErrorMessageBox from '../components/ErrorMessagebox'\r\nimport { createDonation } from '../actions/paymentAction'\r\nimport Loading from '../components/Loading'\r\n\r\nexport default function PaymentScreen() {\r\n  const dispatch = useDispatch()\r\n\r\n  const donationCreate = useSelector((state) => state.donationCreate)\r\n  const { success, error, loading, donations } = donationCreate\r\n\r\n  const navigate = useNavigate()\r\n  useEffect(() => {\r\n    if (success) {\r\n      navigate(`/`)\r\n      dispatch({ type: ORDER_CREATE_RESET })\r\n    }\r\n  }, [success, navigate, dispatch, donations])\r\n\r\n  const payment = useSelector((state) => state.payment)\r\n  payment.taxPrice = Number((0.11 * payment.savePayment.donation).toFixed(2))\r\n  payment.totalPrice =\r\n    Number(payment.taxPrice) + Number(payment.savePayment.donation)\r\n\r\n  const placeOrderHandler = () => {\r\n    dispatch(\r\n      createDonation({\r\n        ...payment,\r\n        DonateItems: payment.Items,\r\n        savePayment: payment.savePayment,\r\n        taxPrice: payment.taxPrice,\r\n        totalPrice: payment.totalPrice,\r\n      })\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <CheckoutSteps step1 step2 step3></CheckoutSteps>\r\n      <Row>\r\n        <Col md={8}>\r\n          <ListGroup variant=\"flush\">\r\n            <ListGroupItem>\r\n              <h2>Donation Project detail</h2>\r\n              <Col md={3} className=\"mt-3\" key={payment.Items.project}>\r\n                <Image\r\n                  src={payment.Items.image}\r\n                  rounded\r\n                  fluid\r\n                  alt={payment.Items.name}\r\n                ></Image>\r\n              </Col>\r\n              <Col className=\"mt-2\">\r\n                <p>Name:{payment.Items.name}</p>\r\n                <p>Email: {payment.Items.category}</p>\r\n                <p>Description: {payment.Items.description}</p>\r\n                <p>Solution: {payment.Items.Solution}</p>\r\n              </Col>\r\n            </ListGroupItem>\r\n            <ListGroupItem>\r\n              <h2>Donor Detail</h2>\r\n              <p>Name: {payment.savePayment.name}</p>\r\n              <p>Email: {payment.savePayment.email}</p>\r\n              <p>Description: {payment.savePayment.description}</p>\r\n            </ListGroupItem>\r\n          </ListGroup>\r\n        </Col>\r\n        <Col md={4}>\r\n          <Card>\r\n            <ListGroup variant=\"flush\">\r\n              <ListGroup.Item>\r\n                <h2>Donation Summary</h2>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Donation amount</Col>\r\n                  <Col>${payment.savePayment.donation}</Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Tax</Col>\r\n                  <Col>${payment.taxPrice}</Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n              <ListGroup.Item>\r\n                <Row>\r\n                  <Col>Total</Col>\r\n                  <Col>${payment.totalPrice}</Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n\r\n              <ListGroup.Item>\r\n                <Button\r\n                  type=\"button\"\r\n                  className=\"btn-block\"\r\n                  amount={payment.totalPrice}\r\n                  onClick={placeOrderHandler}\r\n                >\r\n                  Pay now\r\n                </Button>\r\n\r\n                {loading && <Loading></Loading>}\r\n                {error && (\r\n                  <ErrorMessageBox variant=\"danger\">{error}</ErrorMessageBox>\r\n                )}\r\n              </ListGroup.Item>\r\n            </ListGroup>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}