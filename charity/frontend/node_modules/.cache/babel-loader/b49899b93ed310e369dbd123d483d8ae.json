{"ast":null,"code":"import React,{useEffect}from'react';import{Button,Table,Row,Col}from'react-bootstrap';import{LinkContainer}from'react-router-bootstrap';import{useDispatch,useSelector}from'react-redux';import{listProjects,deleteProject// createProject,\n}from'../actions/projectAction';import Loading from'../components/Loading';import ErrorMessageBox from'../components/ErrorMessagebox';import{useLocation,useNavigate}from'react-router-dom';import{PROJECT_CREATE_RESET}from'../constants/projectConstant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProjectListScreen(){var _useLocation=useLocation(),pathname=_useLocation.pathname;var nGOMode=pathname.indexOf('/Ngo')>=0;var navigate=useNavigate();var dispatch=useDispatch();var deleteHandler=function deleteHandler(project){if(window.confirm('Are you sure?')){dispatch(deleteProject(project._id));}};var projectDelete=useSelector(function(state){return state.projectDelete;});var successDelete=projectDelete.success,loadingDelete=projectDelete.loading,errorDelete=projectDelete.error;var projectList=useSelector(function(state){return state.projectList;});var loading=projectList.loading,error=projectList.error,projects=projectList.projects;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var projectCreate=useSelector(function(state){return state.projectCreate;});var successCreate=projectCreate.success,loadingCreate=projectCreate.loading,errorCreate=projectCreate.error,createdProjects=projectCreate.project;useEffect(function(){if(successCreate){dispatch({type:PROJECT_CREATE_RESET});if(userInfo.isAdmin){navigate(\"/adminDashboard\");}else if(userInfo.isNGO){navigate('/projectlist/Ngo');}}dispatch(listProjects({nGO:nGOMode?userInfo._id:''}));},[dispatch,successCreate,createdProjects,navigate,successDelete,nGOMode,userInfo]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Projects\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return navigate('/project/create');},children:\"Create Project\"})})]}),loadingCreate&&/*#__PURE__*/_jsx(Loading,{}),errorCreate&&/*#__PURE__*/_jsx(ErrorMessageBox,{variant:\"danger\",children:errorCreate}),loadingDelete&&/*#__PURE__*/_jsx(Loading,{}),errorDelete&&/*#__PURE__*/_jsx(ErrorMessageBox,{variant:\"danger\",children:errorDelete}),loading?/*#__PURE__*/_jsx(Loading,{}):error?/*#__PURE__*/_jsx(ErrorMessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CREATED BY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ACTIONS\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:projects.map(function(project){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:project._id}),/*#__PURE__*/_jsx(\"td\",{children:project.name}),/*#__PURE__*/_jsx(\"td\",{children:project.by}),/*#__PURE__*/_jsx(\"td\",{children:project.category}),/*#__PURE__*/_jsx(\"td\",{children:project.location}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/project/\".concat(project._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:\"Edit\"})}),/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(project);},children:\"Delete\"})]})]},project._id);})})]})})]});}","map":{"version":3,"names":["React","useEffect","Button","Table","Row","Col","LinkContainer","useDispatch","useSelector","listProjects","deleteProject","Loading","ErrorMessageBox","useLocation","useNavigate","PROJECT_CREATE_RESET","ProjectListScreen","pathname","nGOMode","indexOf","navigate","dispatch","deleteHandler","project","window","confirm","_id","projectDelete","state","successDelete","success","loadingDelete","loading","errorDelete","error","projectList","projects","userLogin","userInfo","projectCreate","successCreate","loadingCreate","errorCreate","createdProjects","type","isAdmin","isNGO","nGO","map","name","by","category","location"],"sources":["C:/Final year project - Copy - Copy/Final year/charity/frontend/src/screens/ProjectListScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Button, Table, Row, Col } from 'react-bootstrap'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport {\r\n  listProjects,\r\n  deleteProject,\r\n  // createProject,\r\n} from '../actions/projectAction'\r\nimport Loading from '../components/Loading'\r\nimport ErrorMessageBox from '../components/ErrorMessagebox'\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\nimport { PROJECT_CREATE_RESET } from '../constants/projectConstant'\r\n\r\nexport default function ProjectListScreen() {\r\n  const { pathname } = useLocation()\r\n  const nGOMode = pathname.indexOf('/Ngo') >= 0\r\n  const navigate = useNavigate()\r\n  const dispatch = useDispatch()\r\n\r\n  const deleteHandler = (project) => {\r\n    if (window.confirm('Are you sure?')) {\r\n      dispatch(deleteProject(project._id))\r\n    }\r\n  }\r\n\r\n  const projectDelete = useSelector((state) => state.projectDelete)\r\n  const {\r\n    success: successDelete,\r\n    loading: loadingDelete,\r\n    error: errorDelete,\r\n  } = projectDelete\r\n  const projectList = useSelector((state) => state.projectList)\r\n  const { loading, error, projects } = projectList\r\n\r\n  const userLogin = useSelector((state) => state.userLogin)\r\n  const { userInfo } = userLogin\r\n\r\n  const projectCreate = useSelector((state) => state.projectCreate)\r\n  const {\r\n    success: successCreate,\r\n    loading: loadingCreate,\r\n    error: errorCreate,\r\n    project: createdProjects,\r\n  } = projectCreate\r\n\r\n  useEffect(() => {\r\n    if (successCreate) {\r\n      dispatch({ type: PROJECT_CREATE_RESET })\r\n      if (userInfo.isAdmin) {\r\n        navigate(`/adminDashboard`)\r\n      } else if (userInfo.isNGO) {\r\n        navigate('/projectlist/Ngo')\r\n      }\r\n    }\r\n    dispatch(listProjects({ nGO: nGOMode ? userInfo._id : '' }))\r\n  }, [\r\n    dispatch,\r\n    successCreate,\r\n    createdProjects,\r\n    navigate,\r\n    successDelete,\r\n    nGOMode,\r\n    userInfo,\r\n  ])\r\n  return (\r\n    <>\r\n      <Row className=\"align-items-center\">\r\n        <Col>\r\n          <h2>Projects</h2>\r\n        </Col>\r\n        <Col className=\"text-right\">\r\n          <Button onClick={() => navigate('/project/create')}>\r\n            Create Project\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      {loadingCreate && <Loading></Loading>}\r\n      {errorCreate && (\r\n        <ErrorMessageBox variant=\"danger\">{errorCreate}</ErrorMessageBox>\r\n      )}\r\n      {loadingDelete && <Loading></Loading>}\r\n      {errorDelete && (\r\n        <ErrorMessageBox variant=\"danger\">{errorDelete}</ErrorMessageBox>\r\n      )}\r\n      {loading ? (\r\n        <Loading></Loading>\r\n      ) : error ? (\r\n        <ErrorMessageBox variant=\"danger\">{error}</ErrorMessageBox>\r\n      ) : (\r\n        <>\r\n          <Table striped bordered hover responsive>\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>NAME</th>\r\n                <th>CREATED BY</th>\r\n                {/* <th>CURENT DONATION</th> */}\r\n                <th>CATEGORY</th>\r\n                <th>Location</th>\r\n                <th>ACTIONS</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {projects.map((project) => (\r\n                <tr key={project._id}>\r\n                  <td>{project._id}</td>\r\n                  <td>{project.name}</td>\r\n                  <td>{project.by}</td>\r\n                  {/* <td>{project.currentdonation}</td> */}\r\n                  <td>{project.category}</td>\r\n                  <td>{project.location}</td>\r\n                  <td>\r\n                    <LinkContainer to={`/project/${project._id}/edit`}>\r\n                      <Button variant=\"light\" className=\"btn-sm\">\r\n                        Edit\r\n                      </Button>\r\n                    </LinkContainer>\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"light\"\r\n                      className=\"btn-sm\"\r\n                      onClick={() => deleteHandler(project)}\r\n                    >\r\n                      Delete\r\n                    </Button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n          {/* <Pagination>\r\n            {[...Array(pages).keys()].map((x) => (\r\n              <LinkContainer key={x + 1} to={`/projectlist/${x + 1}`}>\r\n                <Pagination.Item active={x + 1 === page}>\r\n                  {x + 1}\r\n                </Pagination.Item>\r\n              </LinkContainer>\r\n            ))}\r\n          </Pagination> */}\r\n        </>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}