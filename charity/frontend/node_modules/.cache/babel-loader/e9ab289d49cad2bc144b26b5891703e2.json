{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import{listDonation,deleteDonation}from'../actions/paymentAction';import ErrorMessageBox from'../components/ErrorMessagebox';import Loading from'../components/Loading';import{ORDER_DELETE_RESET}from'../constants/paymentConstant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function DonationHistoryAdmin(){var donationList=useSelector(function(state){return state.donationList;});var loading=donationList.loading,error=donationList.error,donation=donationList.donation;var donationDelete=useSelector(function(state){return state.donationDelete;});var loadingDelete=donationDelete.loading,errorDelete=donationDelete.error,successDelete=donationDelete.success;var navigate=useNavigate();var dispatch=useDispatch();useEffect(function(){dispatch(listDonation());dispatch({type:ORDER_DELETE_RESET});},[dispatch,successDelete]);var deleteHandler=function deleteHandler(donation){if(window.confirm('Are you sure to delete?')){dispatch(deleteDonation(donation._id));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All Donation history\"}),loadingDelete&&/*#__PURE__*/_jsx(Loading,{}),errorDelete&&/*#__PURE__*/_jsx(ErrorMessageBox,{variant:\"danger\",children:errorDelete}),loading?/*#__PURE__*/_jsx(Loading,{}):error?/*#__PURE__*/_jsx(ErrorMessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PROJECT NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DONNOR NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DATE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"TOTAL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ACTIONS\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:donation.map(function(donation){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:donation._id}),/*#__PURE__*/_jsx(\"td\",{children:donation.DonateItems.name}),/*#__PURE__*/_jsx(\"td\",{children:donation.savePayment.name}),/*#__PURE__*/_jsx(\"td\",{children:donation.createdAt.substring(0,10)}),/*#__PURE__*/_jsx(\"td\",{children:donation.totalPrice.toFixed(2)}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){navigate(\"/donate/\".concat(donation._id));},children:\"Details\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return deleteHandler(donation);},children:\"Delete\"})]})]},donation._id);})})]})]});}","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","useNavigate","listDonation","deleteDonation","ErrorMessageBox","Loading","ORDER_DELETE_RESET","DonationHistoryAdmin","donationList","state","loading","error","donation","donationDelete","loadingDelete","errorDelete","successDelete","success","navigate","dispatch","type","deleteHandler","window","confirm","_id","map","DonateItems","name","savePayment","createdAt","substring","totalPrice","toFixed"],"sources":["C:/Final year project - Copy - Copy/Final year/charity/frontend/src/screens/DonationHistoryAdmin.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { listDonation, deleteDonation } from '../actions/paymentAction'\r\nimport ErrorMessageBox from '../components/ErrorMessagebox'\r\nimport Loading from '../components/Loading'\r\nimport { ORDER_DELETE_RESET } from '../constants/paymentConstant'\r\n\r\nexport default function DonationHistoryAdmin() {\r\n  const donationList = useSelector((state) => state.donationList)\r\n  const { loading, error, donation } = donationList\r\n  const donationDelete = useSelector((state) => state.donationDelete)\r\n  const {\r\n    loading: loadingDelete,\r\n    error: errorDelete,\r\n    success: successDelete,\r\n  } = donationDelete\r\n  const navigate = useNavigate()\r\n  const dispatch = useDispatch()\r\n  useEffect(() => {\r\n    dispatch(listDonation())\r\n    dispatch({ type: ORDER_DELETE_RESET })\r\n  }, [dispatch, successDelete])\r\n  const deleteHandler = (donation) => {\r\n    if (window.confirm('Are you sure to delete?')) {\r\n      dispatch(deleteDonation(donation._id))\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <h1>All Donation history</h1>\r\n      {loadingDelete && <Loading></Loading>}\r\n      {errorDelete && (\r\n        <ErrorMessageBox variant=\"danger\">{errorDelete}</ErrorMessageBox>\r\n      )}\r\n      {loading ? (\r\n        <Loading></Loading>\r\n      ) : error ? (\r\n        <ErrorMessageBox variant=\"danger\">{error}</ErrorMessageBox>\r\n      ) : (\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>PROJECT NAME</th>\r\n              <th>DONNOR NAME</th>\r\n              <th>DATE</th>\r\n              <th>TOTAL</th>\r\n              <th>ACTIONS</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {donation.map((donation) => (\r\n              <tr key={donation._id}>\r\n                <td>{donation._id}</td>\r\n                <td>{donation.DonateItems.name}</td>\r\n                <td>{donation.savePayment.name}</td>\r\n                <td>{donation.createdAt.substring(0, 10)}</td>\r\n                <td>{donation.totalPrice.toFixed(2)}</td>\r\n                <td>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"small\"\r\n                    onClick={() => {\r\n                      navigate(`/donate/${donation._id}`)\r\n                    }}\r\n                  >\r\n                    Details\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"small\"\r\n                    onClick={() => deleteHandler(donation)}\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}