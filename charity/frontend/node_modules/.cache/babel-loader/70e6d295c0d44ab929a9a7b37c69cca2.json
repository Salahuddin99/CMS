{"ast":null,"code":"import _slicedToArray from\"C:/Final year project - Copy - Copy/Final year/charity/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Button,Container,Form}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{Link,useLocation,useNavigate}from'react-router-dom';import{login}from'../actions/userAction';import ErrorMessageBox from'../components/ErrorMessagebox';import Loading from'../components/Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var SignInScreen=function SignInScreen(){var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useLocation=useLocation(),search=_useLocation.search;var redirectInUrl=new URLSearchParams(search).get('redirect');var redirect=redirectInUrl?redirectInUrl:'/';var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo,loading=userLogin.loading,error=userLogin.error;var dispatch=useDispatch();useEffect(function(){if(userInfo){navigate(redirect);console.log(redirect);}},[userInfo,navigate,redirect]);var submitHandler=function submitHandler(e){e.preventDefault();dispatch(login(email,password));};return/*#__PURE__*/_jsxs(Container,{className:\"small-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-3\",children:\"Sign In\"}),error&&/*#__PURE__*/_jsx(ErrorMessageBox,{variant:\"danger\",children:error}),loading&&/*#__PURE__*/_jsx(Loading,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",required:true,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",required:true,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Sign In\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[\"Ready to join us?\",' ',/*#__PURE__*/_jsx(Link,{to:redirect?\"/register?redirect=\".concat(redirect):'/register',children:\"Sign up\"})]})]})]});};","map":{"version":3,"names":["React","useEffect","useState","Button","Container","Form","useDispatch","useSelector","Link","useLocation","useNavigate","login","ErrorMessageBox","Loading","SignInScreen","navigate","email","setEmail","password","setPassword","search","redirectInUrl","URLSearchParams","get","redirect","userLogin","state","userInfo","loading","error","dispatch","console","log","submitHandler","e","preventDefault","target","value"],"sources":["C:/Final year project - Copy - Copy/Final year/charity/frontend/src/screens/SignInScreen.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Button, Container, Form } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom'\r\nimport { login } from '../actions/userAction'\r\nimport ErrorMessageBox from '../components/ErrorMessagebox'\r\nimport Loading from '../components/Loading'\r\n\r\nexport const SignInScreen = () => {\r\n  const navigate = useNavigate()\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n\r\n  const { search } = useLocation()\r\n  const redirectInUrl = new URLSearchParams(search).get('redirect')\r\n  const redirect = redirectInUrl ? redirectInUrl : '/'\r\n\r\n  const userLogin = useSelector((state) => state.userLogin)\r\n  const { userInfo, loading, error } = userLogin\r\n  const dispatch = useDispatch()\r\n  useEffect(() => {\r\n    if (userInfo) {\r\n      navigate(redirect)\r\n      console.log(redirect)\r\n    }\r\n  }, [userInfo, navigate, redirect])\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault()\r\n    dispatch(login(email, password))\r\n  }\r\n\r\n  return (\r\n    <Container className=\"small-container\">\r\n      <h1 className=\"my-3\">Sign In</h1>\r\n      {error && <ErrorMessageBox variant=\"danger\">{error}</ErrorMessageBox>}\r\n      {loading && <Loading />}\r\n      <Form onSubmit={submitHandler}>\r\n        <Form.Group className=\"mb-3\" controlId=\"email\">\r\n          <Form.Label>Email</Form.Label>\r\n          <Form.Control\r\n            type=\"email\"\r\n            required\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"mb-3\" controlId=\"password\">\r\n          <Form.Label>Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            required\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <div className=\"mb-3\">\r\n          <Button type=\"submit\">Sign In</Button>\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          Ready to join us?{' '}\r\n          <Link to={redirect ? `/register?redirect=${redirect}` : '/register'}>\r\n            Sign up\r\n          </Link>\r\n        </div>\r\n      </Form>\r\n    </Container>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}